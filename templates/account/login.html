{% extends "_base.html" %}
{% load crispy_forms_tags %}

{% block title %}Log In{% endblock title %}

{% block content %}
    {% comment %} <h2>Log In</h2>
    <form method="post" action="{% url 'account_login' %}">
        {% csrf_token %}
        {{ form|crispy }}
        <button class="btn btn-success" type="submit">Log In</button>
    </form> {% endcomment %}

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">


    <div id="account-wrapper">
        <div class="action_account">
            <h1 class="text-center">Welcome!</h1>
            <br>
            <form method="post" action="{% url 'account_login' %}">
                {% csrf_token %}
                
                {% if form.errors %}
                    <div class="alert alert-danger">
                        <strong>Error:</strong> Your username or password is wrong!
                    </div>
                {% endif %}
                    
                <div class="mb-3">
                    <label class="form-label">User Name</label>
                    <input type="text" name="login" class="form-control" required>
                </div>

                <div class="mb-3 position-relative">
                    <label class="form-label">Password</label>
                    <input type="password" name="password" id="password" class="form-control" required>
                    <i class="bi bi-eye-slash-fill position-absolute" id="togglePassword" style="top: 38px; right: 15px; cursor: pointer;"></i>
                </div>
                
                <div class="d-grid gap-2">
                    <button class="btn btn-primary" type="submit">Log In</button>
                </div>
            </form>

            <p class="mt-3 text-center">
                <a href="{% url 'account_reset_password' %}">Forgot password?</a>
                |
                <a href="{% url 'account_signup' %}">Sign Up</a>
            </p>
        </div>
    </div>

    
    <script>
        const togglePassword = document.querySelector('#togglePassword');
        const password = document.querySelector('#password');

        togglePassword.addEventListener('click', () => {
            // Toggle the type attribute using
            // getAttribure() method
            const type = password.getAttribute('type') == 'password' ? 'text' : 'password';
            password.setAttribute('type', type)
            // Toggle the eye and bi-eye icon
            this.classList.toggle('bi-eye');
        });
    </script>

{% endblock content %}